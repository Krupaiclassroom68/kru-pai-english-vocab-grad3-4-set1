<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Listening & Vocabulary ‚Äì Minimal Pairs (G3) ‚Ä¢ Pink + Examples</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600;700&family=Fredoka:wght@500;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#FFF7FB; --card:#FFFFFF; --ink:#1A1A1A; --muted:#666;
    --brand:#EC4899; --brand2:#F472B6; --accent:#F9A8D4;
    --ok:#22C55E; --bad:#EF4444;
    --shadow:0 8px 22px rgba(0,0,0,.08); --radius:20px;
  }
  *{box-sizing:border-box}
  body{ margin:0; background:var(--bg); color:var(--ink);
        font-family:"Prompt",sans-serif; display:flex; justify-content:center;
        min-height:100vh; padding:24px; }
  .app{ width:min(980px,100%); }
  .brand{ display:flex; flex-direction:column; align-items:center; gap:8px; margin-bottom:18px; }
  .logo{ width:70px; height:70px; border-radius:50%;
         background:linear-gradient(135deg,var(--brand),var(--brand2));
         box-shadow:var(--shadow); display:flex; align-items:center; justify-content:center;
         color:white; font:700 26px Fredoka; }
  .title{ font:700 26px "Fredoka",sans-serif; color:var(--brand) }
  .card{ background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding:26px; }
  .hero{text-align:center}
  h1{ font:700 clamp(22px,4.2vw,32px) "Fredoka"; margin:6px 0 10px; color:var(--brand) }
  p.lead{ color:var(--muted); font-size:18px }
  .btn{ cursor:pointer; border:none; border-radius:14px; padding:12px 16px; font:700 16px "Fredoka"; transition:.2s }
  .btn.primary{ background:linear-gradient(135deg,var(--brand),var(--brand2)); color:white; box-shadow:0 6px 15px rgba(236,72,153,.35) }
  .btn.secondary{ background:#fff; color:var(--brand); border:2px solid var(--brand) }
  .row{ display:flex; gap:12px; flex-wrap:wrap; align-items:center }
  input[type=text]{ width:320px; padding:14px; border-radius:14px; border:2px solid #F3E0EC; font-size:18px; }
  input[type=text]:focus{ outline:none; border-color:var(--brand) }
  .badge{ background:#FCE7F3; color:var(--brand); padding:6px 12px; border-radius:999px; font-weight:600 }
  .vocab-grid{ display:grid; gap:12px; grid-template-columns:repeat(2,minmax(320px,1fr)); }
  @media(max-width:720px){ .vocab-grid{ grid-template-columns:1fr } }
  .vitem{ border:2px solid #F8E7F1; border-radius:14px; padding:14px; background:#fff; }
  .vhead{ display:flex; justify-content:space-between; gap:8px; align-items:center; margin-bottom:8px; }
  .vterm{ font-weight:700; color:#111 }
  .vth{ color:#C026D3; font-size:14px }
  .ex{ color:#666; font-size:14px; margin-top:2px }
  .ex i{ color:#444 }
  .btn.sound{ padding:6px 10px; border-radius:10px }
  .choices{ display:grid; gap:12px }
  .choice{ padding:14px; border:2px solid #F3E0EC; border-radius:14px; font:600 18px "Prompt"; cursor:pointer; transition:.2s; background:#fff }
  .choice.correct{ border-color:var(--ok); background:#E8F8EE }
  .choice.wrong{ border-color:var(--bad); background:#FEE2E2 }
  .reveal{ display:none; margin-top:12px; border:2px dashed #F3E0EC; border-radius:14px; padding:12px; background:#FFF }
  .score{ font:700 20px Fredoka; color:#DB2777 }
  .timer{ font:700 20px Fredoka; color:#DB2777 }
  .seg{ display:inline-flex; border:2px solid #F3A0C8; border-radius:999px; overflow:hidden }
  .seg button{ border:none; background:#fff; color:#B0266A; padding:8px 12px; font:700 14px Fredoka; }
  .seg button.active{ background:#FCE7F3; color:#8A1D57 }
  .switch{ display:inline-flex; align-items:center; gap:8px; }
  .switch input{ width:42px; height:22px; appearance:none; background:#F3A0C8; border-radius:999px; position:relative; outline:none; cursor:pointer }
  .switch input::after{ content:""; position:absolute; width:18px; height:18px; background:#fff; border-radius:50%; top:2px; left:2px; transition:.2s }
  .switch input:checked::after{ left:22px }
</style>
</head>
<body>
  <div class="app">
    <div class="brand">
      <div class="logo">KP</div>
      <div class="title">Kru Pai Classroom</div>
    </div>

    <!-- Page 1: Name Entry -->
    <section id="namePage" class="card hero">
      <h1>üéÄ Listening & Vocabulary ‚Äì Minimal Pairs (G3)</h1>
      <p class="lead">‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô ‚Üí ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå (‡∏°‡∏µ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏≠‡πà‡∏≤‡∏ô + ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á) ‚Üí ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ü‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥ ‚è±Ô∏è 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ/‡∏Ç‡πâ‡∏≠</p>
      <div class="row" style="justify-content:center; margin-top:10px">
        <input id="playerName" type="text" placeholder="Nickname / ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô" />
        <button class="btn primary" onclick="goVocab()">üëâ ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå</button>
      </div>
    </section>

    <!-- Page 2: Vocabulary Review -->
    <section id="vocabPage" class="card" style="display:none">
      <div class="row" style="justify-content:space-between">
        <span class="badge">Vocabulary Review ‚Ä¢ 20 Groups √ó 3 Words</span>
        <div class="row">
          <!-- speed control -->
          <div class="seg" id="speedSeg">
            <button onclick="setRate(0.55)" id="spSlow">Slow</button>
            <button onclick="setRate(0.70)" id="spNorm" class="active">Normal</button>
            <button onclick="setRate(0.90)" id="spFast">Fast</button>
          </div>
          <!-- shuffle toggle -->
          <label class="switch">
            <input type="checkbox" id="shuffleToggle" checked />
            <span>Shuffle Questions</span>
          </label>
          <button class="btn secondary" onclick="startQuiz()">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
        </div>
      </div>
      <p style="margin:8px 0 14px; color:#555">‡πÅ‡∏ï‡∏∞ üîä ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ü‡∏±‡∏á‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•‡πÑ‡∏ó‡∏¢ ‡πÅ‡∏•‡∏∞‡∏î‡∏π‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡∏ä‡∏±‡∏î ‡πÜ</p>
      <div id="vocabList" class="vocab-grid"></div>
      <div style="margin-top:12px" class="row">
        <button class="btn primary" onclick="startQuiz()">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
      </div>
    </section>

    <!-- Page 3: Quiz -->
    <section id="quizPage" class="card" style="display:none">
      <div class="row" style="justify-content:space-between">
        <span class="badge" id="progress">Q 1/20</span>
        <span class="score" id="playerLabel">Player</span>
        <span class="score" id="score">Score 0</span>
        <span class="timer" id="timer">10</span>
        <div class="row">
          <!-- speed control also available in quiz -->
          <div class="seg" id="speedSeg2">
            <button onclick="setRate(0.55)" id="sp2Slow">Slow</button>
            <button onclick="setRate(0.70)" id="sp2Norm" class="active">Normal</button>
            <button onclick="setRate(0.90)" id="sp2Fast">Fast</button>
          </div>
          <button class="btn secondary" onclick="listenTarget()">üîä Listen</button>
        </div>
      </div>
      <p style="margin:8px 0; color:#555">‡∏ü‡∏±‡∏á‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á (‡∏ó‡∏µ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠)</p>
      <div id="choices" class="choices"></div>
      <div id="revealBox" class="reveal">
        <b>Answer:</b> <span id="revealText"></span>
        <div id="revealTH" class="vth"></div>
      </div>
      <div id="feedback" style="font:700 18px Fredoka; margin-top:10px"></div>
      <div class="row" style="margin-top:10px">
        <button id="nextBtn" class="btn secondary" onclick="nextQ()" style="display:none">‚û°Ô∏è Next</button>
        <button id="restartBtn" class="btn secondary" onclick="restart()" style="display:none">üîÅ Restart</button>
      </div>
    </section>

    <!-- Result -->
    <section id="resultPage" class="card hero" style="display:none">
      <h1 id="finalTitle">Well done!</h1>
      <p class="score" id="finalScore">Final Score 0/20</p>
      <div class="row" style="justify-content:center">
        <button class="btn secondary" onclick="restart()">üîÅ Play Again</button>
      </div>
      <div class="brandfoot">¬© Kru Pai Classroom</div>
    </section>
  </div>

<script>
  // -------- Data: each word now has en, th, exEn, exTh --------
  const groups = [
    [
      {en:"white", th:"‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß", exEn:"The cat is white.", exTh:"‡πÅ‡∏°‡∏ß‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß"},
      {en:"write", th:"‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô", exEn:"I write my name.", exTh:"‡∏â‡∏±‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á"},
      {en:"why", th:"‡∏ó‡∏≥‡πÑ‡∏°", exEn:"Why are you happy?", exTh:"‡∏ó‡∏≥‡πÑ‡∏°‡πÄ‡∏ò‡∏≠‡∏ñ‡∏∂‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç"}
    ],
    [
      {en:"watch", th:"‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏∑‡∏≠/‡∏î‡∏π", exEn:"I watch a cartoon.", exTh:"‡∏â‡∏±‡∏ô‡∏î‡∏π‡∏Å‡∏≤‡∏£‡πå‡∏ï‡∏π‡∏ô"},
      {en:"what", th:"‡∏≠‡∏∞‡πÑ‡∏£", exEn:"What is this?", exTh:"‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£"},
      {en:"vote", th:"‡πÇ‡∏´‡∏ß‡∏ï", exEn:"We vote for a leader.", exTh:"‡∏û‡∏ß‡∏Å‡πÄ‡∏£‡∏≤‡πÇ‡∏´‡∏ß‡∏ï‡∏´‡∏≤‡∏ú‡∏π‡πâ‡∏ô‡∏≥"}
    ],
    [
      {en:"ship", th:"‡πÄ‡∏£‡∏∑‡∏≠", exEn:"The ship is big.", exTh:"‡πÄ‡∏£‡∏∑‡∏≠‡∏•‡∏≥‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡∏ç‡πà"},
      {en:"sheep", th:"‡πÅ‡∏Å‡∏∞", exEn:"A sheep eats grass.", exTh:"‡πÅ‡∏Å‡∏∞‡∏Å‡∏¥‡∏ô‡∏´‡∏ç‡πâ‡∏≤"},
      {en:"cheap", th:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å", exEn:"This pen is cheap.", exTh:"‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡∏î‡πâ‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å"}
    ],
    [
      {en:"pen", th:"‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤", exEn:"I have a blue pen.", exTh:"‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô"},
      {en:"pan", th:"‡∏Å‡∏£‡∏∞‡∏ó‡∏∞", exEn:"The pan is hot.", exTh:"‡∏Å‡∏£‡∏∞‡∏ó‡∏∞‡∏£‡πâ‡∏≠‡∏ô"},
      {en:"pain", th:"‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏à‡πá‡∏ö‡∏õ‡∏ß‡∏î", exEn:"I feel pain in my knee.", exTh:"‡∏â‡∏±‡∏ô‡πÄ‡∏à‡πá‡∏ö‡∏´‡∏±‡∏ß‡πÄ‡∏Ç‡πà‡∏≤"}
    ],
    [
      {en:"sit", th:"‡∏ô‡∏±‡πà‡∏á", exEn:"Please sit down.", exTh:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ô‡∏±‡πà‡∏á‡∏•‡∏á"},
      {en:"seat", th:"‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á", exEn:"Your seat is near the window.", exTh:"‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á"},
      {en:"sheet", th:"‡πÅ‡∏ú‡πà‡∏ô/‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©", exEn:"Take one sheet of paper.", exTh:"‡∏´‡∏¢‡∏¥‡∏ö‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÅ‡∏ú‡πà‡∏ô"}
    ],
    [
      {en:"cat", th:"‡πÅ‡∏°‡∏ß", exEn:"The cat likes milk.", exTh:"‡πÅ‡∏°‡∏ß‡∏ä‡∏≠‡∏ö‡∏ô‡∏°"},
      {en:"cut", th:"‡∏ï‡∏±‡∏î", exEn:"We cut the paper.", exTh:"‡∏û‡∏ß‡∏Å‡πÄ‡∏£‡∏≤‡∏ï‡∏±‡∏î‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©"},
      {en:"cart", th:"‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô/‡∏£‡∏ñ‡∏•‡∏≤‡∏Å", exEn:"Push the cart slowly.", exTh:"‡πÄ‡∏Ç‡πá‡∏ô‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô‡∏ä‡πâ‡∏≤ ‡πÜ"}
    ],
    [
      {en:"bed", th:"‡πÄ‡∏ï‡∏µ‡∏¢‡∏á", exEn:"The bed is soft.", exTh:"‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏ô‡∏∏‡πà‡∏°"},
      {en:"bad", th:"‡πÅ‡∏¢‡πà", exEn:"The weather is bad.", exTh:"‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏¢‡πà"},
      {en:"bat", th:"‡∏Ñ‡πâ‡∏≤‡∏á‡∏Ñ‡∏≤‡∏ß", exEn:"A bat sleeps in a cave.", exTh:"‡∏Ñ‡πâ‡∏≤‡∏á‡∏Ñ‡∏≤‡∏ß‡∏ô‡∏≠‡∏ô‡πÉ‡∏ô‡∏ñ‡πâ‡∏≥"}
    ],
    [
      {en:"full", th:"‡πÄ‡∏ï‡πá‡∏°", exEn:"The glass is full.", exTh:"‡πÅ‡∏Å‡πâ‡∏ß‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏•‡πâ‡∏ß"},
      {en:"fool", th:"‡∏Ñ‡∏ô‡πÇ‡∏á‡πà", exEn:"Don‚Äôt be a fool.", exTh:"‡∏≠‡∏¢‡πà‡∏≤‡πÇ‡∏á‡πà‡∏ô‡∏∞"},
      {en:"fall", th:"‡∏ï‡∏Å", exEn:"Leaves fall in autumn.", exTh:"‡πÉ‡∏ö‡πÑ‡∏°‡πâ‡∏£‡πà‡∏ß‡∏á‡πÉ‡∏ô‡∏§‡∏î‡∏π‡πÉ‡∏ö‡πÑ‡∏°‡πâ‡∏£‡πà‡∏ß‡∏á"}
    ],
    [
      {en:"map", th:"‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà", exEn:"Open the map.", exTh:"‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà"},
      {en:"nap", th:"‡∏á‡∏µ‡∏ö", exEn:"I take a nap.", exTh:"‡∏â‡∏±‡∏ô‡∏á‡∏µ‡∏ö‡∏™‡∏±‡∏Å‡∏û‡∏±‡∏Å"},
      {en:"mop", th:"‡πÑ‡∏°‡πâ‡∏ñ‡∏π‡∏û‡∏∑‡πâ‡∏ô", exEn:"Use a mop to clean.", exTh:"‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πâ‡∏ñ‡∏π‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î"}
    ],
    [
      {en:"fan", th:"‡∏û‡∏±‡∏î‡∏•‡∏°", exEn:"Turn on the fan.", exTh:"‡πÄ‡∏õ‡∏¥‡∏î‡∏û‡∏±‡∏î‡∏•‡∏°"},
      {en:"fun", th:"‡∏™‡∏ô‡∏∏‡∏Å", exEn:"The game is fun.", exTh:"‡πÄ‡∏Å‡∏°‡∏ô‡∏µ‡πâ‡∏™‡∏ô‡∏∏‡∏Å"},
      {en:"phone", th:"‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå", exEn:"Answer the phone, please.", exTh:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏±‡∏ö‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå"}
    ],
    [
      {en:"rice", th:"‡∏Ç‡πâ‡∏≤‡∏ß", exEn:"We eat rice every day.", exTh:"‡∏û‡∏ß‡∏Å‡πÄ‡∏£‡∏≤‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô"},
      {en:"rise", th:"‡∏Ç‡∏∂‡πâ‡∏ô/‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô", exEn:"Prices rise this year.", exTh:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏õ‡∏µ‡∏ô‡∏µ‡πâ"},
      {en:"right", th:"‡∏Ç‡∏ß‡∏≤/‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á", exEn:"That answer is right.", exTh:"‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ô‡∏±‡πâ‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"}
    ],
    [
      {en:"park", th:"‡∏™‡∏ß‡∏ô‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞", exEn:"We play at the park.", exTh:"‡πÄ‡∏£‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏ô‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞"},
      {en:"pork", th:"‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π", exEn:"He doesn‚Äôt eat pork.", exTh:"‡πÄ‡∏Ç‡∏≤‡πÑ‡∏°‡πà‡∏Å‡∏¥‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏π"},
      {en:"perk", th:"‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏û‡∏¥‡πÄ‡∏®‡∏©", exEn:"A free snack is a perk.", exTh:"‡∏Ç‡∏ô‡∏°‡∏ü‡∏£‡∏µ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πá‡∏Å ‡πÜ"}
    ],
    [
      {en:"light", th:"‡πÅ‡∏™‡∏á/‡πÑ‡∏ü", exEn:"Turn off the light.", exTh:"‡∏õ‡∏¥‡∏î‡πÑ‡∏ü"},
      {en:"like", th:"‡∏ä‡∏≠‡∏ö", exEn:"I like apples.", exTh:"‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡∏•"},
      {en:"late", th:"‡∏™‡∏≤‡∏¢", exEn:"Don‚Äôt be late.", exTh:"‡∏≠‡∏¢‡πà‡∏≤‡∏™‡∏≤‡∏¢‡∏ô‡∏∞"}
    ],
    [
      {en:"ship", th:"‡πÄ‡∏£‡∏∑‡∏≠", exEn:"A ship sails at night.", exTh:"‡πÄ‡∏£‡∏∑‡∏≠‡πÅ‡∏•‡πà‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô"},
      {en:"shop", th:"‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤", exEn:"The shop opens at ten.", exTh:"‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏¥‡∏ö‡πÇ‡∏°‡∏á"},
      {en:"shock", th:"‡∏ä‡πá‡∏≠‡∏Å/‡∏ï‡∏Å‡πÉ‡∏à", exEn:"The news gave me a shock.", exTh:"‡∏Ç‡πà‡∏≤‡∏ß‡∏ô‡∏±‡πâ‡∏ô‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏â‡∏±‡∏ô‡∏ï‡∏Å‡πÉ‡∏à"}
    ],
    [
      {en:"fit", th:"‡∏û‡∏≠‡∏î‡∏µ", exEn:"The shoes fit well.", exTh:"‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏û‡∏≠‡∏î‡∏µ‡∏î‡∏µ"},
      {en:"feet", th:"‡πÄ‡∏ó‡πâ‡∏≤ (‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á)", exEn:"Wash your feet.", exTh:"‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏ò‡∏≠"},
      {en:"feed", th:"‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£", exEn:"We feed the fish.", exTh:"‡∏û‡∏ß‡∏Å‡πÄ‡∏£‡∏≤‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏õ‡∏•‡∏≤"}
    ],
    [
      {en:"top", th:"‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô/‡∏¢‡∏≠‡∏î", exEn:"Climb to the top.", exTh:"‡∏õ‡∏µ‡∏ô‡πÑ‡∏õ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô"},
      {en:"tap", th:"‡∏Å‡πä‡∏≠‡∏Å‡∏ô‡πâ‡∏≥/‡πÅ‡∏ï‡∏∞", exEn:"Turn off the tap.", exTh:"‡∏õ‡∏¥‡∏î‡∏Å‡πä‡∏≠‡∏Å‡∏ô‡πâ‡∏≥"},
      {en:"tip", th:"‡∏õ‡∏•‡∏≤‡∏¢/‡∏ó‡∏¥‡∏õ", exEn:"The tip of the pen is sharp.", exTh:"‡∏õ‡∏•‡∏≤‡∏¢‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡∏Ñ‡∏°"}
    ],
    [
      {en:"ball", th:"‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•", exEn:"Kick the ball.", exTh:"‡πÄ‡∏ï‡∏∞‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•"},
      {en:"bell", th:"‡∏Å‡∏£‡∏∞‡∏î‡∏¥‡πà‡∏á", exEn:"Ring the bell.", exTh:"‡∏™‡∏±‡πà‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏¥‡πà‡∏á"},
      {en:"bill", th:"‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ/‡∏ö‡∏¥‡∏•", exEn:"Pay the bill, please.", exTh:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏à‡πà‡∏≤‡∏¢‡∏ö‡∏¥‡∏•"}
    ],
    [
      {en:"man", th:"‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢", exEn:"The man is tall.", exTh:"‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢‡∏ô‡∏±‡πâ‡∏ô‡∏ï‡∏±‡∏ß‡∏™‡∏π‡∏á"},
      {en:"men", th:"‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô", exEn:"The men are teachers.", exTh:"‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏π"},
      {en:"main", th:"‡∏´‡∏•‡∏±‡∏Å/‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç", exEn:"Use the main door.", exTh:"‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏´‡∏•‡∏±‡∏Å"}
    ],
    [
      {en:"coat", th:"‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏Ñ‡πâ‡∏ó", exEn:"Wear a warm coat.", exTh:"‡∏™‡∏ß‡∏°‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏Ñ‡πâ‡∏ó‡∏≠‡∏∏‡πà‡∏ô ‡πÜ"},
      {en:"court", th:"‡∏®‡∏≤‡∏•/‡∏™‡∏ô‡∏≤‡∏°", exEn:"They play on the court.", exTh:"‡∏û‡∏ß‡∏Å‡πÄ‡∏Ç‡∏≤‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô‡∏™‡∏ô‡∏≤‡∏°"},
      {en:"cut", th:"‡∏ï‡∏±‡∏î", exEn:"Cut the paper in half.", exTh:"‡∏ï‡∏±‡∏î‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á"}
    ],
    [
      {en:"sing", th:"‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á", exEn:"We sing together.", exTh:"‡∏û‡∏ß‡∏Å‡πÄ‡∏£‡∏≤‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô"},
      {en:"thing", th:"‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á", exEn:"Put that thing here.", exTh:"‡∏ß‡∏≤‡∏á‡∏™‡∏¥‡πà‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ"},
      {en:"thin", th:"‡∏ú‡∏≠‡∏°‡∏ö‡∏≤‡∏á", exEn:"The book is thin.", exTh:"‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÄ‡∏•‡πà‡∏°‡∏ô‡∏µ‡πâ‡∏ö‡∏≤‡∏á"}
    ]
  ];

  // -------- State --------
  let player = "";
  let order = [...Array(groups.length).keys()];
  let i = 0;                  // pointer in order[]
  let score = 0;
  let targetWord = null;      // {en, th, exEn, exTh}
  let options = [];           // current 3 options (shuffled)
  let answered = false;
  let timeLeft = 10;
  let timerInterval = null;
  let speechRate = 0.70;      // default Normal

  const el = {
    namePage: document.getElementById('namePage'),
    vocabPage: document.getElementById('vocabPage'),
    quizPage: document.getElementById('quizPage'),
    resultPage: document.getElementById('resultPage'),
    vocabList: document.getElementById('vocabList'),
    playerName: document.getElementById('playerName'),
    playerLabel: document.getElementById('playerLabel'),
    progress: document.getElementById('progress'),
    score: document.getElementById('score'),
    timer: document.getElementById('timer'),
    choices: document.getElementById('choices'),
    feedback: document.getElementById('feedback'),
    nextBtn: document.getElementById('nextBtn'),
    restartBtn: document.getElementById('restartBtn'),
    revealBox: document.getElementById('revealBox'),
    revealText: document.getElementById('revealText'),
    revealTH: document.getElementById('revealTH'),
    finalTitle: document.getElementById('finalTitle'),
    finalScore: document.getElementById('finalScore'),
    shuffleToggle: document.getElementById('shuffleToggle'),
    speedSeg: document.getElementById('speedSeg'),
    speedSeg2: document.getElementById('speedSeg2')
  };

  // -------- Navigation --------
  function goVocab(){
    player = (el.playerName.value || "").trim();
    if(!player){ alert("‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡πâ‡∏≤ üôè"); return; }
    el.namePage.style.display = 'none';
    buildVocab();
    el.vocabPage.style.display = 'block';
  }

  function startQuiz(){
    score = 0; i = 0;
    order = [...Array(groups.length).keys()];
    if(el.shuffleToggle.checked){ shuffle(order); }
    el.vocabPage.style.display = 'none';
    el.quizPage.style.display = 'block';
    el.playerLabel.textContent = "Player: " + player;
    loadQ();
  }

  function restart(){
    speechSynthesis.cancel(); clearInterval(timerInterval);
    el.resultPage.style.display = 'none';
    el.namePage.style.display = 'block';
  }

  // -------- Speed control --------
  function setRate(r){
    speechRate = r;
    // toggle active state both segments
    document.querySelectorAll('#speedSeg button, #speedSeg2 button').forEach(b=>b.classList.remove('active'));
    const pick = (r===0.55)? ['#spSlow','#sp2Slow'] : (r===0.70)? ['#spNorm','#sp2Norm'] : ['#spFast','#sp2Fast'];
    pick.forEach(sel => { const btn = document.querySelector(sel); if(btn) btn.classList.add('active'); });
  }

  // -------- Vocab rendering (now includes examples) --------
  function buildVocab(){
    el.vocabList.innerHTML = "";
    groups.forEach((grp, idx)=>{
      const box = document.createElement('div');
      box.className = 'vitem';

      const head = document.createElement('div');
      head.className = 'vhead';
      head.innerHTML = `<div class="vterm">Group ${idx+1}</div>
                        <div class="row">
                          ${grp.map(w=>`<button class="btn secondary sound" onclick="speak('${w.en}', speechRate)">üîä ${w.en}</button>`).join('')}
                        </div>`;
      box.appendChild(head);

      // three lines: word + TH + example
      grp.forEach(w=>{
        const line = document.createElement('div');
        line.innerHTML = `<div class="vterm">${w.en} <span class="vth">(${w.th})</span></div>
                          <div class="ex"><i>${w.exEn}</i> ‚Äî ${w.exTh}</div>`;
        box.appendChild(line);
      });

      el.vocabList.appendChild(box);
    });
  }

  // -------- Quiz logic --------
  function loadQ(){
    answered = false;
    const groupIdx = order[i];
    const grp = groups[groupIdx];

    // progress + score
    el.progress.textContent = `Q ${i+1}/${groups.length}`;
    el.score.textContent = `Score ${score}`;

    // clear UI
    el.choices.innerHTML = '';
    el.feedback.textContent = '';
    hideReveal();

    // pick target within group (random 1 ‡πÉ‡∏ô 3 ‡∏Ñ‡∏≥)
    const idx = Math.floor(Math.random()*3);
    targetWord = grp[idx];

    // build options & shuffle choices
    options = grp.map(w => ({...w}));
    shuffle(options);

    // render choice buttons
    options.forEach((opt)=>{
      const b = document.createElement('button');
      b.className = 'choice';
      b.textContent = opt.en;
      b.onclick = ()=> choose(opt);
      el.choices.appendChild(b);
    });

    startTimer();
    listenTarget();
  }

  function listenTarget(){ speak(targetWord.en, speechRate); }

  function choose(opt){
    if(answered) return;
    answered = true; clearInterval(timerInterval);

    const buttons = [...document.querySelectorAll('.choice')];
    const correctIndex = options.findIndex(o=>o.en===targetWord.en);
    buttons.forEach(b => b.disabled = true);

    if(opt.en === targetWord.en){
      buttons[correctIndex].classList.add('correct');
      el.feedback.innerHTML = `<span style="color:var(--ok)">‚úÖ Correct!</span>`;
      score += 1; el.score.textContent = `Score ${score}`;
    }else{
      const selectedIndex = options.findIndex(o=>o.en===opt.en);
      buttons[selectedIndex].classList.add('wrong');
      buttons[correctIndex].classList.add('correct');
      el.feedback.innerHTML = `<span style="color:var(--bad)">‚ùå Try again!</span>`;
    }

    revealAnswer();
    el.nextBtn.style.display = (i<groups.length-1)? 'inline-block':'none';
    el.restartBtn.style.display = (i===groups.length-1)? 'inline-block':'none';
    if(i===groups.length-1){ showResultSoon(); }
  }

  function startTimer(){
    clearInterval(timerInterval);
    timeLeft = 10;
    el.timer.textContent = timeLeft;
    timerInterval = setInterval(()=>{
      timeLeft--;
      el.timer.textContent = timeLeft;
      if(timeLeft<=0){
        clearInterval(timerInterval);
        if(!answered){ timeUp(); }
      }
    },1000);
  }

  function timeUp(){
    answered = true;
    const buttons = [...document.querySelectorAll('.choice')];
    const correctIndex = options.findIndex(o=>o.en===targetWord.en);
    buttons.forEach(b => b.disabled = true);
    buttons[correctIndex].classList.add('correct');
    el.feedback.innerHTML = `<span style="color:var(--bad)">‚è∞ Time up!</span>`;
    revealAnswer();
    el.nextBtn.style.display = (i<groups.length-1)? 'inline-block':'none';
    el.restartBtn.style.display = (i===groups.length-1)? 'inline-block':'none';
    if(i===groups.length-1){ showResultSoon(); }
  }

  function nextQ(){
    i++;
    if(i<groups.length){ loadQ(); } else { showResult(); }
  }

  function revealAnswer(){
    el.revealText.textContent = targetWord.en;
    el.revealTH.textContent = targetWord.th;
    el.revealBox.style.display = 'block';
  }
  function hideReveal(){
    el.revealBox.style.display = 'none';
    el.revealText.textContent = '';
    el.revealTH.textContent = '';
  }

  function showResultSoon(){ setTimeout(showResult, 700); }
  function showResult(){
    el.quizPage.style.display = 'none';
    el.resultPage.style.display = 'block';
    el.finalTitle.textContent = `Great job, ${player}!`;
    el.finalScore.textContent = `Final Score ${score}/${groups.length}`;
  }

  // -------- Utilities --------
  function speak(text, rate){
    try{
      speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(text);
      u.lang = 'en-US';
      u.rate = rate || 0.7;
      speechSynthesis.speak(u);
    }catch(e){ console.warn(e); }
  }
  function shuffle(arr){
    for(let m=arr.length-1;m>0;m--){
      const n = Math.floor(Math.random()*(m+1));
      [arr[m], arr[n]] = [arr[n], arr[m]];
    }
    return arr;
  }

  // default speed UI state
  setRate(0.70);
</script>
</body>
</html>
